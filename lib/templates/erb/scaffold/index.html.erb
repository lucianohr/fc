<h1><%%= t('.title') %></h1>

<div id="search_container" class="form-actions">
  <%%= search_form_for @search, url: search_<%= plural_table_name %>_path, html: { method: :post, class: "navbar-form pull-left", remote: true } do |f| %>

    <%%= f.text_field :_cont, class: "form-control search-field", placeholder: t(".search_prompt") %>

    <button id="search_submit" class="btn btn-default">
      <i class="fa fa-search fa-lg"></i> <%%= t("helpers.link_to.search") %>
    </button>

    <%%= link_to <%= plural_table_name %>_path(q: nil), {id: "link_clear", class: 'btn btn-default', remote: true } do %>

      <i class="fa fa-reply fa-lg"></i> <%%= t("helpers.link_to.clear") %>

    <%% end %>

    <a id="search_plus" class="btn btn-default">
      <i id="search_plus_icon" class="fa fa-search-plus fa-lg"></i>
    </a>
  <%% end %>

  <div class="navbar-nav pull-right">
    <%%= link_to new_<%= singular_table_name %>_path, class: 'btn btn-primary' do %>

      <i class="fa fa-plus fa-lg"></i> <%%= t('helpers.link_to.new') %>

    <%% end %>
  </div>
  <!-- CORRIGE ALINHAMENTO DAS DIV's ANTERIORES -->
  <div class="search-clear-both"></div>

</div>

<!-- painel pesquisa avanÃ§ada (+) -->
<div class="search_panel">
  <%%= search_form_for @search, url: search_<%= plural_table_name %>_path, html: { method: :post, class: "navbar-form", remote: true } do |f| %>
    <div id="search_table">
      <div class="row">
        <div class="col-xs-3 col-sm-3"><%%= f.label t('helpers.search.fields') %></div>
        <div class="col-xs-3 col-sm-3"><%%= f.label t('helpers.search.predicate') %></div>
        <div class="col-xs-3 col-sm-3"><%%= f.label t('helpers.search.value') %></div>
        <div class="col-xs-3 col-sm-3"></div>
      </div>
      <%%= f.condition_fields do |c| %>
        <%%= render 'shared/condition_fields', f: c %>
      <%% end %>
    </div>

    <div class="row">
      <div class="col-xs-6 col-sm-6">
        <%%= link_to_add_fields t('helpers.search.add_cond'), f, :condition, 'shared/condition_fields' %>

      </div>
      <div class="col-xs-6 col-sm-6">
        <button class="btn btn-primary btn-sm pull-right">
          <i class="fa fa-search"></i> <%%= t("helpers.link_to.search") %>

        </button>
      </div>
    </div>
  <%% end %>

</div>

<div class="paginator">
  <%%= paginate(@<%= plural_table_name %>, remote: true) unless @<%= plural_table_name %>.size == 0 %>

</div>
<div class="table-responsive">
  <table id="<%= plural_table_name %>" class="table table-hover">
    <thead>
    <%%= render 'list_header' %>
<%%# ****** EXTRACT TO '_list_header.html.erb' ****** %>
    <tr>
      <% attributes.reject(&:password_digest?).each do |attribute| -%>
      <th><%%= sort_link @search, :<%= attribute.name %>, t('.<%= attribute.name %>'), { action: "search" }, method: :post, remote: true %></th>
      <% end -%>
      <th class="actions"></th>
      <th class="actions"></th>
      <th class="actions"></th>
    </tr>
<%%# ****** ****** %>

    </thead>
    <tbody>
    <%%= render @<%= plural_table_name %> %>

<%%# ****** EXTRACT TO '_<%= singular_table_name %>.html.erb' ****** %>
    <tr>
      <% attributes.reject(&:password_digest?).each do |attribute| -%>
      <td><%%= <%= singular_table_name %>.<%= attribute.name %> %></td>
      <% end -%>
      <td>
        <%%= link_to <%= singular_table_name %>_path(<%= singular_table_name %>.id), title: t("helpers.link_to.show"), data: { toggle: "modal", target: "#showModal" }  do %>
        <i class='fa fa-file-text-o fa-lg'></i>
        <%% end %>
      </td>
      <td>
        <%%= link_to edit_<%= singular_table_name %>_path(<%= singular_table_name %>), title: t("helpers.link_to.edit") do %>
        <i class='fa fa-edit fa-lg'></i>
        <%% end %>
      </td>
      <td>
        <%%= link_to <%= singular_table_name %>, method: :delete, title: t("helpers.link_to.destroy"), data: { confirm: t("helpers.link_to.destroy_confirm") }, remote: true do %>
        <i class='fa fa-trash-o fa-lg'></i>
        <%% end %>
      </td>
    </tr>
<%%# ****** ****** %>
    </tbody>
  </table>
</div>
<div class="paginator">
  <%%= paginate(@<%= plural_table_name %>, remote: true) unless @<%= plural_table_name %>.size == 0 %>
</div>
<br/>
<%%= render 'shared/show_modal' %>